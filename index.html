<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="dark-theme.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expense Tracker</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    .entry { display: flex; margin: 0.5em 0; }
    .entry span { margin-right: 1em; }
    .remove-btn { cursor: pointer; color: red; margin-left: auto; }
    input { margin: 0.2em; }
  </style>
</head>
<body>
  <h1>Today's Expenses & Income</h1>
  <div>
    <input id="amount" type="number" placeholder="Amount" />
    <input id="desc" type="text" placeholder="Description" />
  </div>
  <div id="entry-list"></div>

  <a href="history.html">View History</a>

  <script>
    const amountInput = document.getElementById("amount");
    const descInput = document.getElementById("desc");
    const entryList = document.getElementById("entry-list");

    const today = new Date().toISOString().split("T")[0];

    const storageKey = `entries-${today}`;

    let entries = JSON.parse(localStorage.getItem(storageKey)) || [];

    function saveEntries() {
      localStorage.setItem(storageKey, JSON.stringify(entries));
    }

    function renderEntries() {
      entryList.innerHTML = "";
      entries.forEach((entry, index) => {
        const div = document.createElement("div");
        div.className = "entry";
        div.innerHTML = `
          <span>${entry.amount < 0 ? "Expense" : "Income"}: $${entry.amount}</span>
          <span>${entry.desc}</span>
          <span class="remove-btn" data-index="${index}">🗑️</span>
        `;
        entryList.appendChild(div);
      });
    }

    function addEntry(amount, desc) {
      entries.push({ amount: parseFloat(amount), desc });
      saveEntries();
      renderEntries();
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        const amt = amountInput.value;
        const desc = descInput.value;
        if (amt && desc) {
          addEntry(amt, desc);
          amountInput.value = "";
          descInput.value = "";
        }
      }
    });

    entryList.addEventListener("click", (e) => {
      if (e.target.classList.contains("remove-btn")) {
        const index = e.target.dataset.index;
        entries.splice(index, 1);
        saveEntries();
        renderEntries();
      }
    });

    renderEntries();
  </script>
</body>
</html>
